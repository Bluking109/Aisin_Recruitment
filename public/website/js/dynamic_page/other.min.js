function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var recaptchaReset=function(e){grecaptcha.ready(function(){grecaptcha.execute(siteKey,{action:e}).then(function(e){$("#btn-update").prop("disabled",!1),$("#recaptcha-key").val(e)})})},prepareSubmit=function(){$("#btn-update").find(".submit-text").hide(),$("#btn-update").find(".loading").css("display","inline-block"),$("#btn-update").prop("disabled",!0)},afterSubmit=function(){$("#btn-update").find(".submit-text").show(),$("#btn-update").find(".loading").css("display","none"),$(".error-update").remove(),setTimeout(function(){$("#btn-update").prop("disabled",!1)},3e3)},getRegions=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],buildQuery(a)),r=$(n).val();$.ajax({url:t+"?"+o,type:"GET",dataType:"json",success:function(t){var a="";t.forEach(function(e){var t="";e.id==r&&(t="selected"),a+='<option value="'.concat(e.id,'" ').concat(t,">").concat(e.text,"</option>")}),$(n).chosen("destroy").empty().append(a),$(n).chosen();var o=$(n).data("child");if(null!=o&&null!=o){var i=$(n).data("parent-param"),s=$(n).val();e($(n).data("child-url"),o,_defineProperty({},i,s))}},statusCode:{500:function(e){console.log("Internal Server Error")}}})},buildQuery=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},datePickerInit=function(){$(".datepicker").datepicker({format:"dd-mm-yyyy",autoclose:!0,orientation:"bottom"})};$(function(){$(window).width()<800&&1!=localStorage.getItem("keep_use_device")&&Swal.fire({title:"Device Kurang Lebar :(",text:"Demi kemudahan Anda, untuk pengisian form kami sarankan menggunakan laptop atau komputer",type:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#ccc",confirmButtonText:"Gunakan device ini",cancelButtonText:"Tutup"}).then(function(e){e.value&&localStorage.setItem("keep_use_device","1")}),datePickerInit(),$(".year-input").datepicker({format:"yyyy",viewMode:"years",minViewMode:"years",autoclose:!0,orientation:"bottom"})});var initRangeMonthDatePicker=function(){[{firstDatePicker:".disease-from-date",lastDatePicker:".disease-end-date",format:"dd-mm-yyyy",viewMode:"dates"}].forEach(function(e){$(e.lastDatePicker).datepicker({format:e.format,viewMode:e.viewMode,minViewMode:e.viewMode,autoclose:!0,orientation:"bottom"}).on("changeDate",function(t){$(e.firstDatePicker).datepicker("setEndDate",t.date)}),$(e.firstDatePicker).datepicker({format:e.format,viewMode:e.viewMode,minViewMode:e.viewMode,autoclose:!0,orientation:"bottom"}).on("changeDate",function(t){$(e.lastDatePicker).datepicker("setStartDate",t.date)})})};$(function(){initRangeMonthDatePicker(),recaptchaReset("other"),$("#other-recruitment-form").on("click",".add-other",function(){var e=$(this).closest("form").find(".other-row");if(e.last().find(".chosen").chosen("destroy"),!(e.length>=5)){var t=e.last().clone(),n=parseInt(t.data("index"))+1;t.find("input").val(""),t.find(".other-organizer").attr("name","other_recruitments[".concat(n,"][organizer]")),t.find(".other-is-astra").attr("name","other_recruitments[".concat(n,"][is_astra]")),t.find("#is-astra-yes-"+t.data("index")).attr("id","is-astra-yes-"+n).val("1"),t.find("#is-astra-no-"+t.data("index")).attr("id","is-astra-no-"+n).val("0"),t.find('label[for="is-astra-yes-'+t.data("index")+'"]').attr("for","is-astra-yes-"+n),t.find('label[for="is-astra-no-'+t.data("index")+'"]').attr("for","is-astra-no-"+n),t.find(".other-process").attr("name","other_recruitments[".concat(n,"][process]")),t.find(".other-place").attr("name","other_recruitments[".concat(n,"][place]")),t.find(".other-date").attr("name","other_recruitments[".concat(n,"][date]")),t.find(".other-position").attr("name","other_recruitments[".concat(n,"][position]")),t.find(".other-status").attr("name","other_recruitments[".concat(n,"][status]")),t.attr("data-index",n),t.appendTo("#other-recruitment-form"),$("#other-recruitment-form").find(".chosen").chosen(),datePickerInit()}}),$("#other-recruitment-form").on("click",".remove-other",function(){$(this).closest("form").find(".other-row").length<2||$(this).closest(".other-row").remove()}),$("#disease-form").on("click",".add-disease",function(){var e=$(this).closest("form").find(".disease-row");if(e.last().find(".chosen").chosen("destroy"),!(e.length>=5)){var t=e.last().clone(),n=parseInt(t.data("index"))+1;t.find("input").val(""),t.find(".disease-name").attr("name","diseases[".concat(n,"][name]")),t.find(".disease-from-date").attr("name","diseases[".concat(n,"][from_date]")),t.find(".disease-end-date").attr("name","diseases[".concat(n,"][end_date]")),t.find(".disease-note").attr("name","diseases[".concat(n,"][note]")),t.attr("data-index",n),t.appendTo("#disease-form"),$("#disease-form").find(".chosen").chosen(),initRangeMonthDatePicker()}}),$("#disease-form").on("click",".remove-disease",function(){$(this).closest("form").find(".disease-row").length<2||$(this).closest(".disease-row").remove()}),$('input[type="radio"][name="in_another_recruitment_process"]').on("change",function(){"1"==$(this).val()?$(".other-element").prop("disabled",!1):$(".other-element").prop("disabled",!0),$("#other-recruitment-form").find(".chosen").chosen("destroy"),$("#other-recruitment-form").find(".chosen").chosen()}),$('input[type="radio"][name="use_glasses"]').on("change",function(){"1"==$(this).val()?($(".minus-wrapper").show(),$(".eye-element").prop("disabled",!1)):($(".minus-wrapper").hide(),$(".eye-element").prop("disabled",!0)),$("#other-form").find(".chosen").chosen("destroy"),$("#other-form").find(".chosen").chosen()}),$('input[type="radio"][name="had_disease"]').on("change",function(){"1"==$(this).val()?$(".disease-element").prop("disabled",!1):$(".disease-element").prop("disabled",!0),$("#disease-form").find(".chosen").chosen("destroy"),$("#disease-form").find(".chosen").chosen()}),$(".disease-name").closest(".pf-field").on("keyup",".chosen-search-input",function(e){if(13==e.which){var t=$(e).val();$(".custom-option").remove(),$(".disease-name").append('<option class="custom-option" value="'+t+'" selected>'+t+"</option>"),$(".disease-name").trigger("chosen:updated"),$(".chosen-container").removeClass("chosen-with-drop")}}),$("#btn-update").on("click",function(e){e.preventDefault(),prepareSubmit();var t=$("#other-form, #other-recruitment-form, #disease-form, #agreement-form");$.ajax({url:"/profiles/other",type:"POST",data:t.serialize(),success:function(e){e.success&&(Toast.fire({type:"success",title:e.message}),recaptchaReset("other")),afterSubmit()},statusCode:{422:function(e){recaptchaReset("other"),afterSubmit(),Toast.fire({type:"error",title:"Mohon koreksi ulang inputan Anda"});var n=e.responseJSON.errors,a=function(){var e=error.split("."),a="";e.length>1?(e.forEach(function(t,n){n!=e.length&&(a+=0==n?t+"[":t+"][")}),a=a.slice(0,-1)):a=error,t.find('[name="'+a+'"]').closest(".pf-field").after('<span class="text-danger error-update">'.concat(n[error].join(". "),"</span>"))};for(error in n)a()},400:function(e){Toast.fire({type:"error",title:e.responseJSON.message}),recaptchaReset("other"),afterSubmit()},500:function(e){Toast.fire({type:"error",title:"Internal server error"}),recaptchaReset("other"),afterSubmit()}}})})});
