function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var recaptchaReset=function(e){grecaptcha.ready(function(){grecaptcha.execute(siteKey,{action:e}).then(function(e){$("#btn-update").prop("disabled",!1),$("#recaptcha-key").val(e)})})},prepareSubmit=function(){$("#btn-update").find(".submit-text").hide(),$("#btn-update").find(".loading").css("display","inline-block"),$("#btn-update").prop("disabled",!0)},afterSubmit=function(){$("#btn-update").find(".submit-text").show(),$("#btn-update").find(".loading").css("display","none"),$(".error-update").remove(),setTimeout(function(){$("#btn-update").prop("disabled",!1)},3e3)},getRegions=function e(n,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],buildQuery(a)),r=$(t).val();$.ajax({url:n+"?"+i,type:"GET",dataType:"json",success:function(n){var a="";n.forEach(function(e){var n="";e.id==r&&(n="selected"),a+='<option value="'.concat(e.id,'" ').concat(n,">").concat(e.text,"</option>")}),$(t).chosen("destroy").empty().append(a),$(t).chosen();var i=$(t).data("child");if(null!=i&&null!=i){var o=$(t).data("parent-param"),c=$(t).val();e($(t).data("child-url"),i,_defineProperty({},o,c))}},statusCode:{500:function(e){console.log("Internal Server Error")}}})},buildQuery=function(e){if("string"==typeof e)return e;var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},datePickerInit=function(){$(".datepicker").datepicker({format:"dd-mm-yyyy",autoclose:!0,orientation:"bottom"})};$(function(){$(window).width()<800&&1!=localStorage.getItem("keep_use_device")&&Swal.fire({title:"Device Kurang Lebar :(",text:"Demi kemudahan Anda, untuk pengisian form kami sarankan menggunakan laptop atau komputer",type:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#ccc",confirmButtonText:"Gunakan device ini",cancelButtonText:"Tutup"}).then(function(e){e.value&&localStorage.setItem("keep_use_device","1")}),datePickerInit(),$(".year-input").datepicker({format:"yyyy",viewMode:"years",minViewMode:"years",autoclose:!0,orientation:"bottom"})});var labelInit=function(){$("#children-form").find(".child-label").each(function(e,n){$(this).text("Nama Anak Ke-"+(e+1))}),$("#children-form").find(".child-name").each(function(e,n){$(this).attr("placeholder","Nama Anak Ke-"+(e+1))}),$("#siblings-form").find(".sibling-label").each(function(e,n){$(this).text("Nama Saudara Ke-"+(e+1))}),$("#siblings-form").find(".sibling-name").each(function(e,n){$(this).attr("placeholder","Nama Saudara Ke-"+(e+1))})};$(function(){recaptchaReset("family"),datePickerInit(),$("#children-form").on("click",".add-child",function(){var e=$(this).closest("form").find(".child-row");if(!(e.length>=3)){var n=e.last().clone(),t=n.data("index"),a=parseInt(n.data("index"))+1;n.find('input[type="text"]').val(""),n.find(".child-name").attr("name","children[".concat(a,"][name]")),n.find(".child-place-of-birth").attr("name","children[".concat(a,"][place_of_birth]")),n.find(".child-date-of-birth").attr("name","children[".concat(a,"][date_of_birth]")),n.find(".child-gender").attr("name","children[".concat(a,"][gender]")),n.find("#child-gender-man-".concat(t)).attr("id","child-gender-man-".concat(a)),n.find("#child-gender-women-".concat(t)).attr("id","child-gender-women-".concat(a)),n.find('label[for="child-gender-man-'.concat(t,'"]')).attr("for","child-gender-man-".concat(a)),n.find('label[for="child-gender-women-'.concat(t,'"]')).attr("for","child-gender-women-".concat(a)),n.find(".child-education").attr("name","children[".concat(a,"][last_education]")),n.find(".child-job").attr("name","children[".concat(a,"][job]")),n.attr("data-index",a),n.appendTo("#children-form"),labelInit(),datePickerInit()}}),$("#children-form").on("click",".remove-child",function(){$(this).closest("form").find(".child-row").length<2||($(this).closest(".child-row").remove(),labelInit())}),$("#siblings-form").on("click",".add-brother",function(){var e=$(this).closest("form").find(".sibling-row");if(!(e.length>=7)){var n=e.last().clone(),t=n.data("index"),a=parseInt(n.data("index"))+1;n.find('input[type="text"]').val(""),n.find(".sibling-name").attr("name","siblings[".concat(a,"][name]")),n.find(".sibling-place-of-birth").attr("name","siblings[".concat(a,"][place_of_birth]")),n.find(".sibling-date-of-birth").attr("name","siblings[".concat(a,"][date_of_birth]")),n.find(".sibling-gender").attr("name","siblings[".concat(a,"][gender]")),n.find("#sibling-gender-man-".concat(t)).attr("id","sibling-gender-man-".concat(a)),n.find("#sibling-gender-women-".concat(t)).attr("id","sibling-gender-women-".concat(a)),n.find('label[for="sibling-gender-man-'.concat(t,'"]')).attr("for","sibling-gender-man-".concat(a)),n.find('label[for="sibling-gender-women-'.concat(t,'"]')).attr("for","sibling-gender-women-".concat(a)),n.find(".sibling-job").attr("name","siblings[".concat(a,"][job]")),n.find(".sibling-education").attr("name","siblings[".concat(a,"][last_education]")),n.attr("data-index",a),n.appendTo("#siblings-form"),labelInit(),datePickerInit()}}),$("#siblings-form").on("click",".remove-brother",function(){$(this).closest("form").find(".sibling-row").length<2||($(this).closest(".sibling-row").remove(),labelInit())}),$("#btn-update").on("click",function(e){e.preventDefault(),prepareSubmit();var n=$("#marital-status-form, #partner-form, #children-form, #parent-form, #siblings-form");$.ajax({url:"/profiles/family",type:"PUT",data:n.serialize(),success:function(e){e.success&&(Toast.fire({type:"success",title:e.message}),recaptchaReset("family")),afterSubmit()},statusCode:{422:function(e){recaptchaReset("family"),afterSubmit(),Toast.fire({type:"error",title:"Mohon koreksi ulang inputan Anda"});var t=e.responseJSON.errors,a=function(){var e=error.split("."),a="";e.length>1?(e.forEach(function(n,t){t!=e.length&&(a+=0==t?n+"[":n+"][")}),a=a.slice(0,-1)):a=error,n.find('[name="'+a+'"]').after('<span class="text-danger error-update">'.concat(t[error].join(". "),"</span>"))};for(error in t)a()},400:function(e){Toast.fire({type:"error",title:e.responseJSON.message}),recaptchaReset("family"),afterSubmit()},500:function(e){Toast.fire({type:"error",title:"Internal server error"}),recaptchaReset("family"),afterSubmit()}}})})});
