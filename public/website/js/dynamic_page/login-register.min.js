let recaptchaReset=function(){grecaptcha.ready(function(){grecaptcha.execute(siteKey,{action:"homepage"}).then(function(t){$("#modal-register").addClass("signup-popup-box"),$("#modal-login").addClass("signin-popup-box"),$("#register-recaptcha-key").val(t),$("#login-recaptcha-key").val(t)})})};const showErrorValidation=function(t,e){let a=e.responseJSON.errors;for(error in a){let e=t.find('[name="'+error+'"]').closest(".cfield");e.after(`<p class="text-danger text-left error-auth">${a[error].join(". ")}</p>`),e.addClass("no-margin")}},resetErrorValidation=function(t){t.find(".submit-button").attr("type","submit"),t.find(".submit-text").show(),t.find(".loading").css("display","none"),$(".error-auth").remove(),$(".cfield").removeClass("no-margin")},showRecaptchaError=function(t){$(t).after('<p class="text-danger text-left error-auth text-center no-margin">Recaptcha Error</p>')},prepareValidation=function(t){t.find(".submit-button").attr("type","button"),t.find(".submit-text").hide(),t.find(".loading").css("display","inline-block")};$(function(){recaptchaReset(),$.ajax({url:"/ajax/education-levels",type:"GET",dataType:"json",success:function(t){let e="";t.forEach(t=>{e+=`<option value="${t.id}">${t.text}</option>`}),$("#education-select").chosen("destroy").append(e),$("#education-select").chosen()},statusCode:{500:function(t){console.log("Internal Server Error")}}}),$("#form-login").on("submit",function(t){t.preventDefault();let e=$(this);prepareValidation(e),$.ajax({url:$(this).attr("action"),type:$(this).attr("method"),data:$(this).serialize(),dataType:"json",success:function(t){window.location.href="/profiles/personal-identity"},statusCode:{422:function(t){resetErrorValidation(e),showErrorValidation(e,t),recaptchaReset()},400:function(t){resetErrorValidation(e),showRecaptchaError("#login-title"),recaptchaReset()}}})}),$("#form-register").on("submit",function(t){t.preventDefault();let e=$(this);prepareValidation(e),$.ajax({url:e.attr("action"),type:e.attr("method"),data:e.serialize(),dataType:"json",success:function(t){t.success&&($(".term-register").hide(),$("#form-register").remove(),$("#register-title").text("Pendaftaran Berhasil"),$("#modal-register").find(".account-popup").append('<div>\n                \t\t\t<br><hr>\n\t\t\t\t\t\t\t<p class="text-success text-center">Pendaftaran anda berhasil, mohon cek email untuk konfirmasi dan melanjutkan proses lamaran Anda</p>\n                \t\t</div>'),recaptchaReset())},statusCode:{422:function(t){resetErrorValidation(e),showErrorValidation(e,t),recaptchaReset()},400:function(t){resetErrorValidation(e),showRecaptchaError("#register-title"),recaptchaReset()}}})})});
